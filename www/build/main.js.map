{"version":3,"sources":["../../src/app/config.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/home/home.ts","../../src/pages/create-issue/create-issue.ts","../../src/providers/picture/picture.ts","../../src/pages/issue-map/issue-map.ts","../../src/providers/issues/issues.ts","../../src/pages/issue-list/issue-list.ts","../../src/pages/issue-details/issue-details.ts","../../src/pages/login/login.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/providers/auth/auth.ts","../../src/models/auth-request.ts","../../src/providers/auth-interceptor/auth-interceptor.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["// Copy this file to config.ts and fill in appropriate values.\r\nexport const config = {\r\n  apiUrl: 'https://comem-citizen-engagement.herokuapp.com/api',\r\n  qimgUrl: 'https://comem-qimg.herokuapp.com/api',\r\n  qimgSecret: 'xSqn2Ck9L4FuDqo8VjNdodBR8Z/8QfHippRnm6s2QaZVZ7kybgOSILiV1S9M02VkDqpcOj1h96gBmPLb9BFew8QuLHs1716PjEX4hzpcgwZcZk2OCliQd0i0nGLRd+GkWMpgKe6Z0pV7mszfICyMntz5evi/J/crjR5A5/aYTzA='\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/config.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 169;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 169\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 216;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 216\n// module chunks = 0","import { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\n\r\nimport { CreateIssuePage } from '../create-issue/create-issue';\r\nimport { IssueMapPage } from '../issue-map/issue-map';\r\nimport { IssueListPage } from '../issue-list/issue-list';\r\n\r\nexport interface HomePageTab {\r\n  title: string;\r\n  icon: string;\r\n  component: Function;\r\n}\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n\r\n  tabs: HomePageTab[];\r\n\r\n  constructor(public navCtrl: NavController) {\r\n    this.tabs = [\r\n      { title: 'New Issue', icon: 'add', component: CreateIssuePage },\r\n      { title: 'Issue Map', icon: 'map', component: IssueMapPage },\r\n      { title: 'Issue List', icon: 'list', component: IssueListPage }\r\n    ];\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { NavController, NavParams, Platform } from 'ionic-angular';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\nimport { config } from '../../app/config';\r\nimport { QimgImage }Â from '../../models/qimg-image';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\nimport { PictureProvider } from '../../providers/picture/picture';\r\n\r\n/**\r\n * Generated class for the CreateIssuePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n@Component({\r\n  selector: 'page-create-issue',\r\n  templateUrl: 'create-issue.html',\r\n})\r\nexport class CreateIssuePage {\r\n  picture: QimgImage;\r\n\r\n  constructor(\r\n    private auth: AuthProvider,\r\n    private geolocation: Geolocation,\r\n    private httpClient: HttpClient,\r\n    private navCtrl: NavController,\r\n    private navParams: NavParams,\r\n    private pictureService: PictureProvider,\r\n    private platform: Platform\r\n  ) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad CreateIssuePage');\r\n\r\n    const url = `${config.apiUrl}/issueTypes`;\r\n    this.httpClient.get(url).subscribe(issueTypes => {\r\n      console.log('Issue types loaded', issueTypes);\r\n    });\r\n\r\n    this.platform.ready().then(() => {\r\n      const geolocationPromise = this.geolocation.getCurrentPosition();\r\n      geolocationPromise.then(position => {\r\n        console.log(`User is at ${position.coords.longitude}, ${position.coords.latitude}`);\r\n      }, err => {\r\n        console.warn(`Could not retrieve user position because: ${err.message}`);\r\n      });\r\n    });\r\n  }\r\n\r\n  logOut() {\r\n    this.auth.logOut();\r\n  }\r\n\r\n  takePicture() {\r\n    this.pictureService.takeAndUploadPicture().subscribe(picture => {\r\n      this.picture = picture;\r\n    }, err => {\r\n      console.warn('Could not take picture', err);\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/create-issue/create-issue.ts","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { switchMap, tap } from 'rxjs/operators';\r\n\r\nimport { config } from '../../app/config';\r\nimport { QimgImage } from '../../models/qimg-image';\r\n\r\n/**\r\n * Service to take pictures and upload them to the qimg API.\r\n */\r\n@Injectable()\r\nexport class PictureProvider {\r\n\r\n  constructor(private camera: Camera, private http: HttpClient) {\r\n    console.log('Hello PictureProvider Provider');\r\n    console.log('@@@ http client', !!this.http);\r\n  }\r\n\r\n  /**\r\n   * Takes a picture, uploads it to the qimg API, and returns the created image.\r\n   *\r\n   * Returns an observable that will emit the created QimgObject if the picture\r\n   * has been taken and successfully uploaded to the qimg API. An error may be\r\n   * emitted instead if the user does not take a picture of if the upload fails.\r\n   */\r\n  takeAndUploadPicture(): Observable<QimgImage> {\r\n\r\n    // Take a picture.\r\n    // This creates an observable of picture data.\r\n    const pictureData$ = this.takePicture();\r\n\r\n    // Once the picture has been taken, upload it to the qimg API.\r\n    // This returns a new observable of the resulting QimgImage object.\r\n    const uploadedImage$ = pictureData$.pipe(switchMap(data => this.uploadPicture(data)))\r\n\r\n    // Once the picture has been uploaded, log a message to the console\r\n    // indicating that all went well.\r\n    // This does not change the observable stream.\r\n    const debug$ = uploadedImage$.pipe(tap(image => console.log(`Successfully uploaded picture to ${image.url}`)));\r\n\r\n    // Return the observable stream.\r\n    return debug$;\r\n  }\r\n\r\n  /**\r\n   * Launches the camera to take a picture.\r\n   *\r\n   * Returns an observable that will emit the raw picture data as a string\r\n   * once the picture has been taken. An error may be emitted instead if the\r\n   * user does not take a picture.\r\n   */\r\n  private takePicture(): Observable<string> {\r\n\r\n    // Prepare camera options.\r\n    const options: CameraOptions = {\r\n      quality: 50,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE\r\n    };\r\n\r\n    // Start taking a picture.\r\n    // The promise will be resolved when the user has snapped and validated the picture.\r\n    // It may be rejected if the user does not take a picture.\r\n    const pictureDataPromise = this.camera.getPicture(options);\r\n\r\n    // Convert the promise to an observable and return it.\r\n    return Observable.fromPromise(pictureDataPromise);\r\n  }\r\n\r\n  /**\r\n   * Uploads raw picture data to the qimg API.\r\n   *\r\n   * Returns an observable that will emit the created QimgImage object.\r\n   * An error may be emitted instead if the upload fails.\r\n   */\r\n  private uploadPicture(pictureData: string): Observable<QimgImage> {\r\n\r\n    const requestBody = {\r\n      data: pictureData\r\n    };\r\n\r\n    const requestOptions = {\r\n      headers: {\r\n        Authorization: `Bearer ${config.qimgSecret}`\r\n      }\r\n    };\r\n\r\n    return this.http.post<QimgImage>(`${config.qimgUrl}/images`, requestBody, requestOptions);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/picture/picture.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\nimport { latLng, Map, MapOptions, marker, Marker, tileLayer } from 'leaflet';\r\nimport { IssuesProvider } from '../../providers/issues/issues';\r\n\r\n/**\r\n * Generated class for the IssueMapPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@Component({\r\n  selector: 'page-issue-map',\r\n  templateUrl: 'issue-map.html',\r\n})\r\nexport class IssueMapPage {\r\n    map: Map;\r\n    mapMarkers: Marker[];\r\n    mapOptions: MapOptions;\r\n\r\n    constructor(public navCtrl: NavController, public navParams: NavParams, public issues: IssuesProvider) {\r\n        this.mapOptions = {\r\n            layers: [\r\n            tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18 })\r\n            ],\r\n            zoom: 13,\r\n            center: latLng(46.778186, 6.641524)\r\n        };\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        this.issues.getIssues(50).subscribe(data => {\r\n            this.mapMarkers = [];\r\n            data.forEach(element => {\r\n                const newMarker = marker([element.location.coordinates[1],element.location.coordinates[0]]).on('click', this.onClickMarker);\r\n                this.mapMarkers.push(newMarker);\r\n            });\r\n        });\r\n    }\r\n    \r\n    onClickMarker(event){\r\n        alert(\"hi. you clicked the marker at \" + event.latlng);\r\n    }\r\n\r\n    onMapReady(map: Map) {\r\n        this.map = map;\r\n        this.map.on('moveend', () => {\r\n            const center = this.map.getCenter();\r\n            console.log(`Map moved to ${center.lng}, ${center.lat}`);\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/issue-map/issue-map.ts","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Issue } from '../../models/issue';\nimport { Observable } from 'rxjs/Observable';\n\n\nconst URL_API = 'https://comem-citizen-engagement.herokuapp.com/api';\n\n/*\n  Generated class for the ProvidersIssuesProvider provider.\n\n  See https://angular.io/guide/dependency-injection for more info on providers\n  and Angular DI.\n*/\n@Injectable()\nexport class IssuesProvider {\n\n  constructor(public http: HttpClient) {\n    \n  }\n    \n    getIssues(pageSize: number) : Observable<Issue[]> {\n        if (!pageSize) {\n            return this.http.get<Issue[]>(URL_API + '/issues');\n        } else {\n            return this.http.get<Issue[]>(URL_API + '/issues?pageSize=' + pageSize);\n        }\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/issues/issues.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { IssueDetailsPage } from '../issue-details/issue-details';\r\n\r\n/**\r\n * Generated class for the IssueListPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@Component({\r\n  selector: 'page-issue-list',\r\n  templateUrl: 'issue-list.html',\r\n})\r\nexport class IssueListPage {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad IssueListPage');\r\n  }\r\n\r\n  goToDetails() {\r\n    this.navCtrl.push(IssueDetailsPage, {\r\n      foo: 'bar'\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/issue-list/issue-list.ts","import { Component } from '@angular/core';\r\nimport { NavController, NavParams } from 'ionic-angular';\r\n\r\n/**\r\n * Generated class for the IssueDetailsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@Component({\r\n  selector: 'page-issue-details',\r\n  templateUrl: 'issue-details.html',\r\n})\r\nexport class IssueDetailsPage {\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad IssueDetailsPage');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/issue-details/issue-details.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\n\r\nimport { AuthRequest } from '../../models/auth-request';\r\nimport { AuthProvider } from '../../providers/auth/auth';\r\n\r\n/**\r\n * Login page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n@Component({\r\n  templateUrl: 'login.html'\r\n})\r\nexport class LoginPage {\r\n\r\n  /**\r\n   * This authentication request object will be updated when the user\r\n   * edits the login form. It will then be sent to the API.\r\n   */\r\n  authRequest: AuthRequest;\r\n\r\n  /**\r\n   * If true, it means that the authentication API has return a failed response\r\n   * (probably because the name or password is incorrect).\r\n   */\r\n  loginError: boolean;\r\n\r\n  /**\r\n   * The login form.\r\n   */\r\n  @ViewChild(NgForm)\r\n  form: NgForm;\r\n\r\n  constructor(private auth: AuthProvider) {\r\n    this.authRequest = new AuthRequest();\r\n  }\r\n\r\n  /**\r\n   * Called when the login form is submitted.\r\n   */\r\n  onSubmit($event) {\r\n\r\n    // Prevent default HTML form behavior.\r\n    $event.preventDefault();\r\n\r\n    // Do not do anything if the form is invalid.\r\n    if (this.form.invalid) {\r\n      return;\r\n    }\r\n\r\n    // Hide any previous login error.\r\n    this.loginError = false;\r\n\r\n    // Perform the authentication request to the API.\r\n    this.auth.logIn(this.authRequest).subscribe(undefined, err => {\r\n      this.loginError = true;\r\n      console.warn(`Authentication failed: ${err.message}`);\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { IonicStorageModule } from '@ionic/storage';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { Camera } from '@ionic-native/camera';\r\n\r\nimport { MyApp } from './app.component';\r\nimport { HomePage } from '../pages/home/home';\r\nimport { CreateIssuePage } from '../pages/create-issue/create-issue';\r\nimport { IssueDetailsPage } from '../pages/issue-details/issue-details';\r\nimport { IssueListPage } from '../pages/issue-list/issue-list';\r\nimport { IssueMapPage } from '../pages/issue-map/issue-map';\r\nimport { LoginPage } from '../pages/login/login';\r\nimport { AuthProvider } from '../providers/auth/auth';\r\nimport { AuthInterceptorProvider } from '../providers/auth-interceptor/auth-interceptor';\r\nimport { PictureProvider } from '../providers/picture/picture';\r\nimport { IssuesProvider } from '../providers/issues/issues';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    HomePage,\r\n    CreateIssuePage,\r\n    IssueDetailsPage,\r\n    IssueListPage,\r\n    IssueMapPage,\r\n    LoginPage\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp),\r\n    HttpClientModule,\r\n    IonicStorageModule.forRoot(),\r\n    LeafletModule.forRoot()\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    HomePage,\r\n    CreateIssuePage,\r\n    IssueDetailsPage,\r\n    IssueListPage,\r\n    IssueMapPage,\r\n    LoginPage\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    AuthProvider,\r\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptorProvider, multi: true },\r\n    Geolocation,\r\n    Camera,\r\n    PictureProvider,\r\n    IssuesProvider\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\r\nimport { Platform } from 'ionic-angular';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\n\r\nimport { HomePage } from '../pages/home/home';\r\nimport { LoginPage } from '../pages/login/login';\r\nimport { AuthProvider } from '../providers/auth/auth';\r\n\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  rootPage: any;\r\n\r\n  constructor(private auth: AuthProvider, platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\r\n\r\n    // Direct the user to the correct page depending on whether he or she is logged in.\r\n    this.auth.isAuthenticated().subscribe(authenticated => {\r\n      if (authenticated) {\r\n        this.rootPage = HomePage;\r\n      } else {\r\n        this.rootPage = LoginPage;\r\n      }\r\n    });\r\n\r\n    platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      statusBar.styleDefault();\r\n      splashScreen.hide();\r\n    });\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport { Observable, ReplaySubject } from 'rxjs/Rx';\r\nimport { delayWhen, map } from 'rxjs/operators';\r\n\r\nimport { AuthRequest } from '../../models/auth-request';\r\nimport { AuthResponse } from '../../models/auth-response';\r\nimport { User } from '../../models/user';\r\nimport { config } from '../../app/config';\r\n\r\n/**\r\n * Authentication service for login/logout.\r\n */\r\n@Injectable()\r\nexport class AuthProvider {\r\n\r\n  private auth$: Observable<AuthResponse>;\r\n  private authSource: ReplaySubject<AuthResponse>;\r\n\r\n  constructor(private http: HttpClient, private storage: Storage) {\r\n\r\n    this.authSource = new ReplaySubject(1);\r\n    this.auth$ = this.authSource.asObservable();\r\n\r\n    this.storage.get('auth').then(auth => {\r\n      this.authSource.next(auth);\r\n    });\r\n  }\r\n\r\n  isAuthenticated(): Observable<boolean> {\r\n    return this.auth$.pipe(map(auth => !!auth));\r\n  }\r\n\r\n  getUser(): Observable<User> {\r\n    return this.auth$.pipe(map(auth => auth ? auth.user : undefined));\r\n  }\r\n\r\n  getToken(): Observable<string> {\r\n    return this.auth$.pipe(map(auth => auth ? auth.token : undefined));\r\n  }\r\n\r\n  logIn(authRequest: AuthRequest): Observable<User> {\r\n\r\n    const authUrl = `${config.apiUrl}/auth`;\r\n    return this.http.post<AuthResponse>(authUrl, authRequest).pipe(\r\n      delayWhen(auth => {\r\n        return this.saveAuth(auth);\r\n      }),\r\n      map(auth => {\r\n        this.authSource.next(auth);\r\n        console.log(`User ${auth.user.name} logged in`);\r\n        return auth.user;\r\n      })\r\n    );\r\n  }\r\n\r\n  logOut() {\r\n    this.authSource.next(null);\r\n    this.storage.remove('auth');\r\n    console.log('User logged out');\r\n  }\r\n\r\n  private saveAuth(auth: AuthResponse): Observable<void> {\r\n    return Observable.fromPromise(this.storage.set('auth', auth));\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth/auth.ts","export class AuthRequest {\r\n  name: string;\r\n  password: string;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/auth-request.ts","import { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { Injectable, Injector } from '@angular/core';\r\nimport { Observable } from 'rxjs/Rx';\r\nimport { first, switchMap } from 'rxjs/operators';\r\n\r\nimport { AuthProvider } from '../auth/auth';\r\n\r\n@Injectable()\r\nexport class AuthInterceptorProvider implements HttpInterceptor {\r\n\r\n  constructor(private injector: Injector) {}\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n    // Retrieve AuthProvider at runtime from the injector.\r\n    // (Otherwise there would be a circular dependency:\r\n    //  AuthInterceptorProvider -> AuthProvider -> HttpClient -> AuthInterceptorProvider).\r\n    const auth = this.injector.get(AuthProvider);\r\n\r\n    // Get the bearer token (if any).\r\n    return auth.getToken().pipe(\r\n      first(),\r\n      switchMap(token => {\r\n\r\n        // Add it to the request if it doesn't already have an Authorization header.\r\n        if (token && !req.headers.has('Authorization')) {\r\n          req = req.clone({\r\n            headers: req.headers.set('Authorization', `Bearer ${token}`)\r\n          });\r\n        }\r\n\r\n        return next.handle(req);\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth-interceptor/auth-interceptor.ts"],"sourceRoot":""}